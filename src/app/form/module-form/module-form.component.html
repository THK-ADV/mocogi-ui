<h1>{{title}}</h1>

<form [formGroup]="formGroup" (ngSubmit)="submit()">
  <div mat-dialog-content>
    <ng-container *ngFor="let section of moduleForm.sections">
      <h2>{{section.header}}</h2>
      <div class="container-row"  *ngFor="let row of section.rows | keyvalue">
        <ng-container *ngFor="let input of row.value" ngSwitch="input.input.kind">
          <cops-options-input
            *ngSwitchCase="'options'"
            ngDefaultControl
            [input]="asOptions(input.input)"
            [formControl]="formControl(input.input.attr)">
          </cops-options-input>
          <cops-multiple-options-input
            *ngSwitchCase="'multiple-options'"
            ngDefaultControl
            [input]="asMultipleOptions(input.input)"
            [formControl]="formControl(input.input.attr)">
          </cops-multiple-options-input>
          <cops-read-only-input
            *ngSwitchCase="'read-only'"
            ngDefaultControl
            [input]="asReadOnly(input.input)"
            [formControl]="formControl(input.input.attr)">
          </cops-read-only-input>
          <cops-boolean-input
            *ngSwitchCase="'boolean'"
            ngDefaultControl
            [input]="asBoolean(input.input)"
            [formControl]="formControl(input.input.attr)">
          </cops-boolean-input>
          <cops-plain-input
            *ngSwitchDefault
            ngDefaultControl
            [input]="asTextInput(input.input)"
            [formControl]="formControl(input.input.attr)">
          </cops-plain-input>
        </ng-container>
      </div>
    </ng-container>
  </div>

  <div mat-dialog-actions>
    <button type="button" mat-flat-button (click)="cancel()">Abbrechen</button>
    <button mat-flat-button color="primary" [disabled]="!formGroup.valid">{{buttonTitle}}</button>
    <button type="button" mat-flat-button (click)="validate()">Validieren</button>
  </div>
</form>
